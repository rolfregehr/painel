[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Nossa Saúde em Dados",
    "section": "",
    "text": "Doenças isquêmicas do coração (DIC)\n\n\n\n\nCard 2\nOutro conteúdo. \n\n\n\n\n\n\nCard 3\nMais conteúdo."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Sobre",
    "section": "",
    "text": "Dados com informações de saúde a partir de dados oficiais.\nCriado e mantido por Rolf Regehr. rolf@gmail.com"
  },
  {
    "objectID": "dic.html",
    "href": "dic.html",
    "title": "",
    "section": "",
    "text": "I21 - Infarto agudo do miocárdio\nÉ a principal causa de mortalidade no Brasil\n\n\n\nDIC são evitáveis\n\n\n\n\nd3 = require(\"d3@7\")\n\n// Célula 2: Carregamento dos dados\ndata = FileAttachment(\"fontes/dic_genero_idade.json\").json()\n\n// Célula 3: Slider de range duplo\nviewof ageRange = {\n  const form = html`&lt;div style=\"font-family: sans-serif;\"&gt;\n    &lt;label style=\"font-weight: bold; margin-bottom: 10px; display: block;\"&gt;\n      Filtro de Idade: &lt;span id=\"range-display\"&gt;0 - 100 anos&lt;/span&gt;\n    &lt;/label&gt;\n    &lt;div style=\"position: relative; width: 100%; height: 50px; margin: 20px 0;\"&gt;\n      &lt;!-- Track de fundo --&gt;\n      &lt;div style=\"position: absolute; top: 22px; left: 0; right: 0; height: 6px; background: #ddd; border-radius: 3px;\"&gt;&lt;/div&gt;\n      &lt;!-- Track do range selecionado --&gt;\n      &lt;div id=\"range-track\" style=\"position: absolute; top: 22px; height: 6px; background: #007bff; border-radius: 3px;\"&gt;&lt;/div&gt;\n      &lt;!-- Slider do mínimo --&gt;\n      &lt;input type=\"range\" min=\"0\" max=\"100\" value=\"0\" step=\"1\" id=\"min-slider\"\n             style=\"position: absolute; width: 100%; height: 6px; background: transparent; -webkit-appearance: none; outline: none;\"&gt;\n      &lt;!-- Slider do máximo --&gt;\n      &lt;input type=\"range\" min=\"0\" max=\"100\" value=\"100\" step=\"1\" id=\"max-slider\"\n             style=\"position: absolute; width: 100%; height: 6px; background: transparent; -webkit-appearance: none; outline: none;\"&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;`;\n  \n  const minSlider = form.querySelector('#min-slider');\n  const maxSlider = form.querySelector('#max-slider');\n  const display = form.querySelector('#range-display');\n  const rangeTrack = form.querySelector('#range-track');\n  \n  // Estilizar os sliders\n  const style = html`&lt;style&gt;\n    #min-slider, #max-slider {\n      pointer-events: none;\n    }\n    \n    #min-slider::-webkit-slider-thumb, #max-slider::-webkit-slider-thumb {\n      pointer-events: all;\n      -webkit-appearance: none;\n      appearance: none;\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n      cursor: pointer;\n      border: 3px solid white;\n      box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n    }\n    \n    #min-slider::-webkit-slider-thumb {\n      background: #007bff;\n    }\n    \n    #max-slider::-webkit-slider-thumb {\n      background: #28a745;\n    }\n    \n    #min-slider::-moz-range-thumb, #max-slider::-moz-range-thumb {\n      width: 20px;\n      height: 20px;\n      border-radius: 50%;\n      cursor: pointer;\n      border: 3px solid white;\n      box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n      border: none;\n    }\n    \n    #min-slider::-moz-range-thumb {\n      background: #007bff;\n    }\n    \n    #max-slider::-moz-range-thumb {\n      background: #28a745;\n    }\n    \n    #min-slider::-webkit-slider-track, #max-slider::-webkit-slider-track {\n      background: transparent;\n      border: none;\n    }\n    \n    #min-slider::-moz-range-track, #max-slider::-moz-range-track {\n      background: transparent;\n      border: none;\n    }\n  &lt;/style&gt;`;\n  \n  document.head.appendChild(style);\n  \n  let isDragging = false;\n  let dragTarget = null;\n  \n  // Atualizar a visualização do range\n  function updateRangeTrack() {\n    const min = parseInt(minSlider.value);\n    const max = parseInt(maxSlider.value);\n    const minPercent = (min / 100) * 100;\n    const maxPercent = (max / 100) * 100;\n    \n    rangeTrack.style.left = minPercent + '%';\n    rangeTrack.style.width = (maxPercent - minPercent) + '%';\n  }\n  \n  // Função para atualizar valores\n  function updateValues() {\n    let min = parseInt(minSlider.value);\n    let max = parseInt(maxSlider.value);\n    \n    // Trocar valores se necessário, mas manter o que está sendo arrastado\n    if (min &gt; max) {\n      if (dragTarget === minSlider) {\n        // Se estou arrastando o mínimo e passou do máximo, \n        // o mínimo vira máximo e vice-versa\n        [minSlider.value, maxSlider.value] = [maxSlider.value, minSlider.value];\n        [min, max] = [max, min];\n      } else if (dragTarget === maxSlider) {\n        // Se estou arrastando o máximo e passou do mínimo,\n        // o máximo vira mínimo e vice-versa  \n        [minSlider.value, maxSlider.value] = [maxSlider.value, minSlider.value];\n        [min, max] = [max, min];\n      }\n    }\n    \n    display.textContent = `${Math.min(min, max)} - ${Math.max(min, max)} anos`;\n    form.value = [Math.min(min, max), Math.max(min, max)];\n    form.dispatchEvent(new CustomEvent(\"input\"));\n    \n    updateRangeTrack();\n  }\n  \n  // Event listeners para detectar início do arraste\n  minSlider.addEventListener(\"mousedown\", () =&gt; {\n    isDragging = true;\n    dragTarget = minSlider;\n  });\n  \n  maxSlider.addEventListener(\"mousedown\", () =&gt; {\n    isDragging = true;\n    dragTarget = maxSlider;\n  });\n  \n  // Event listeners para input\n  minSlider.addEventListener(\"input\", updateValues);\n  maxSlider.addEventListener(\"input\", updateValues);\n  \n  // Resetar quando soltar\n  document.addEventListener(\"mouseup\", () =&gt; {\n    isDragging = false;\n    dragTarget = null;\n  });\n  \n  // Permitir clique na track para mover o slider mais próximo\n  rangeTrack.parentElement.addEventListener(\"click\", (e) =&gt; {\n    if (isDragging) return;\n    \n    const rect = rangeTrack.parentElement.getBoundingClientRect();\n    const clickPercent = (e.clientX - rect.left) / rect.width;\n    const clickValue = Math.round(clickPercent * 100);\n    \n    const minVal = parseInt(minSlider.value);\n    const maxVal = parseInt(maxSlider.value);\n    \n    // Mover o slider mais próximo do clique\n    if (Math.abs(clickValue - minVal) &lt; Math.abs(clickValue - maxVal)) {\n      minSlider.value = clickValue;\n    } else {\n      maxSlider.value = clickValue;\n    }\n    \n    updateValues();\n  });\n  \n  // Inicializar\n  updateRangeTrack();\n  form.value = [0, 100];\n  return form;\n}\n\n// Célula 4: Extrair valores do range\nminAge = ageRange[0]\nmaxAge = ageRange[1]\n\n// Célula 5: Dados filtrados\nfilteredData = data.filter(d =&gt; d.idade &gt;= minAge && d.idade &lt;= maxAge)\n\n// Célula 6: Estatísticas\nmd`**Estatísticas do filtro atual:**\n- Idade: ${minAge} a ${maxAge} anos\n- Total Masculino: ${d3.sum(filteredData, d =&gt; d.Masc).toLocaleString()}\n- Total Feminino: ${d3.sum(filteredData, d =&gt; d.Fem).toLocaleString()}\n- Total Geral: ${d3.sum(filteredData, d =&gt; d.Masc + d.Fem).toLocaleString()}\n- Registros: ${filteredData.length} faixas etárias`\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlot.plot({\nwidth: 1400,\n  height: 600,\n  marginLeft: 60,\n  marginBottom: 60,\n  y: { \n  grid: true,\n  fontSize: 30\n  },\n  color: {scheme: \"RdYlBu\"},\n  marks: [\n    Plot.areaY(filteredData, {\n      x: \"idade\",\n      y1: \"Masc\",\n      y2: \"Fem\",\n      curve: \"step-after\",\n      fill: (d) =&gt; (d[\"Masc\"] &lt; d[\"Fem\"] ? \"#FED789FF\" : \"#72874E80\"),\n      z: null\n    }),\n    Plot.lineY(filteredData, {\n      x: \"idade\",\n      y: \"Fem\",\n      curve: \"step-after\",\n      stroke: \"steelblue\",\n      strokeWidth: 3\n    })\n  ]\n})"
  }
]